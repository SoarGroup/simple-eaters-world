sp {hierarchical-SMEM*propose*store-score
   (state <s> ^name hierarchical-SMEM
              ^last-move { << wall empty red purple green blue >> <map-object> }
              ^io.input-link.score-diff <sd>)
  -{(<cmd> ^store <a>)
    (<a> ^<map-object> <v>)}
-->
   (write (crlf) <sd>)
   (<s> ^operator <o> + >)
   (<o> ^name store-score
        ^map-object <map-object>
        ^score-diff <sd>)
}

sp {hierarchical-SMEM*apply*store-score
   (state <s> ^operator <o>
              ^smem.command <cmd>)
   (<o> ^name store-score
        ^map-object <map-object>
        ^score-diff <sd>)
-->
   (<cmd> ^store <r>)
   (<r> ^<map-object> <sd>)
   (<s> ^last-move <map-object> -)
   (write (crlf) |Hello World|)
}

sp {hierarchical-SMEM*propose*move
   (state <s> ^name hierarchical-SMEM
              ^io.input-link <il>)
   (<il> ^{ << north south east west >> <dir> } <map-object>)
-->
   (<s> ^operator <op> +)
   (<op> ^name move
         ^dir <dir>
         ^map-object <map-object>
         ^value nil)
}
